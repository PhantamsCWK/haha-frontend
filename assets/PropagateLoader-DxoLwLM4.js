import{S as N,p as k,d as p,s as X,e as w,n as _,i as F,f as j,t as K,g as G,h as J,k as A,l as V,r as h,m as Y,a as Z,o as $,q as S}from"./index-CZFq8Sd1.js";var q=class extends N{constructor(e,t){super(),this.options=t,this.#s=e,this.#a=null,this.#r=k(),this.bindMethods(),this.setOptions(t)}#s;#e=void 0;#p=void 0;#t=void 0;#i;#h;#r;#a;#m;#u;#d;#o;#c;#n;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),z(this.#e,this.options)?this.#l():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return L(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return L(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#R(),this.#O(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,r=this.#e;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof p(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#C(),this.#e.setOptions(this.options),t._defaulted&&!X(this.options,t)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const s=this.hasListeners();s&&B(this.#e,r,this.options,t)&&this.#l(),this.updateResult(),s&&(this.#e!==r||p(this.options.enabled,this.#e)!==p(t.enabled,this.#e)||w(this.options.staleTime,this.#e)!==w(t.staleTime,this.#e))&&this.#g();const a=this.#v();s&&(this.#e!==r||p(this.options.enabled,this.#e)!==p(t.enabled,this.#e)||a!==this.#n)&&this.#b(a)}getOptimisticResult(e){const t=this.#s.getQueryCache().build(this.#s,e),r=this.createResult(t,e);return te(this,r)&&(this.#t=r,this.#h=this.options,this.#i=this.#e.state),r}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),t?.(s),s==="promise"&&!this.options.experimental_prefetchInRender&&this.#r.status==="pending"&&this.#r.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,s))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#s.defaultQueryOptions(e),r=this.#s.getQueryCache().build(this.#s,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#l({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#l(e){this.#C();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(_)),t}#g(){this.#R();const e=w(this.options.staleTime,this.#e);if(F||this.#t.isStale||!j(e))return;const r=K(this.#t.dataUpdatedAt,e)+1;this.#o=setTimeout(()=>{this.#t.isStale||this.updateResult()},r)}#v(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#b(e){this.#O(),this.#n=e,!(F||p(this.options.enabled,this.#e)===!1||!j(this.#n)||this.#n===0)&&(this.#c=setInterval(()=>{(this.options.refetchIntervalInBackground||G.isFocused())&&this.#l()},this.#n))}#y(){this.#g(),this.#b(this.#v())}#R(){this.#o&&(clearTimeout(this.#o),this.#o=void 0)}#O(){this.#c&&(clearInterval(this.#c),this.#c=void 0)}createResult(e,t){const r=this.#e,s=this.options,a=this.#t,u=this.#i,n=this.#h,c=e!==r?e.state:this.#p,{state:d}=e;let i={...d},y=!1,o;if(t._optimisticResults){const f=this.hasListeners(),P=!f&&z(e,t),C=f&&B(e,r,t,s);(P||C)&&(i={...i,...J(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(i.fetchStatus="idle")}let{error:R,errorUpdatedAt:O,status:v}=i;o=i.data;let b=!1;if(t.placeholderData!==void 0&&o===void 0&&v==="pending"){let f;a?.isPlaceholderData&&t.placeholderData===n?.placeholderData?(f=a.data,b=!0):f=typeof t.placeholderData=="function"?t.placeholderData(this.#d?.state.data,this.#d):t.placeholderData,f!==void 0&&(v="success",o=A(a?.data,f,t),y=!0)}if(t.select&&o!==void 0&&!b)if(a&&o===u?.data&&t.select===this.#m)o=this.#u;else try{this.#m=t.select,o=t.select(o),o=A(a?.data,o,t),this.#u=o,this.#a=null}catch(f){this.#a=f}this.#a&&(R=this.#a,o=this.#u,O=Date.now(),v="error");const E=i.fetchStatus==="fetching",x=v==="pending",I=v==="error",M=x&&E,D=o!==void 0,m={status:v,fetchStatus:i.fetchStatus,isPending:x,isSuccess:v==="success",isError:I,isInitialLoading:M,isLoading:M,data:o,dataUpdatedAt:i.dataUpdatedAt,error:R,errorUpdatedAt:O,failureCount:i.fetchFailureCount,failureReason:i.fetchFailureReason,errorUpdateCount:i.errorUpdateCount,isFetched:i.dataUpdateCount>0||i.errorUpdateCount>0,isFetchedAfterMount:i.dataUpdateCount>c.dataUpdateCount||i.errorUpdateCount>c.errorUpdateCount,isFetching:E,isRefetching:E&&!x,isLoadingError:I&&!D,isPaused:i.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:I&&D,isStale:U(e,t),refetch:this.refetch,promise:this.#r,isEnabled:p(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const f=Q=>{m.status==="error"?Q.reject(m.error):m.data!==void 0&&Q.resolve(m.data)},P=()=>{const Q=this.#r=m.promise=k();f(Q)},C=this.#r;switch(C.status){case"pending":e.queryHash===r.queryHash&&f(C);break;case"fulfilled":(m.status==="error"||m.data!==C.value)&&P();break;case"rejected":(m.status!=="error"||m.error!==C.reason)&&P();break}}return m}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#i=this.#e.state,this.#h=this.options,this.#i.data!==void 0&&(this.#d=this.#e),X(t,e))return;this.#t=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!this.#f.size)return!0;const u=new Set(a??this.#f);return this.options.throwOnError&&u.add("error"),Object.keys(this.#t).some(n=>{const g=n;return this.#t[g]!==e[g]&&u.has(g)})};this.#S({listeners:r()})}#C(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#p=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#S(e){V.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function ee(e,t){return p(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function z(e,t){return ee(e,t)||e.state.data!==void 0&&L(e,t,t.refetchOnMount)}function L(e,t,r){if(p(t.enabled,e)!==!1&&w(t.staleTime,e)!=="static"){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&U(e,t)}return!1}function B(e,t,r,s){return(e!==t||p(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&U(e,r)}function U(e,t){return p(t.enabled,e)!==!1&&e.isStaleByTime(w(t.staleTime,e))}function te(e,t){return!X(e.getCurrentResult(),t)}var W=h.createContext(!1),se=()=>h.useContext(W);W.Provider;function re(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var ae=h.createContext(re()),ne=()=>h.useContext(ae),ie=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},oe=e=>{h.useEffect(()=>{e.clearReset()},[e])},ce=({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&e.data===void 0||Y(r,[e.error,s])),le=e=>{if(e.suspense){const t=s=>s==="static"?s:Math.max(s??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...s)=>t(r(...s)):t(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},he=(e,t)=>e.isLoading&&e.isFetching&&!t,ue=(e,t)=>e?.suspense&&t.isPending,H=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function de(e,t,r){const s=se(),a=ne(),u=Z(),n=u.defaultQueryOptions(e);u.getDefaultOptions().queries?._experimental_beforeQuery?.(n),n._optimisticResults=s?"isRestoring":"optimistic",le(n),ie(n,a),oe(a);const g=!u.getQueryCache().get(n.queryHash),[c]=h.useState(()=>new t(u,n)),d=c.getOptimisticResult(n),i=!s&&e.subscribed!==!1;if(h.useSyncExternalStore(h.useCallback(y=>{const o=i?c.subscribe(V.batchCalls(y)):_;return c.updateResult(),o},[c,i]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),h.useEffect(()=>{c.setOptions(n)},[n,c]),ue(n,d))throw H(n,c,a);if(ce({result:d,errorResetBoundary:a,throwOnError:n.throwOnError,query:u.getQueryCache().get(n.queryHash),suspense:n.suspense}))throw d.error;return u.getDefaultOptions().queries?._experimental_afterQuery?.(n,d),n.experimental_prefetchInRender&&!F&&he(d,s)&&(g?H(n,c,a):u.getQueryCache().get(n.queryHash)?.promise)?.catch(_).finally(()=>{c.updateResult()}),n.notifyOnChangeProps?d:c.trackResult(d)}function ve(e,t){return de(e,q)}var T=function(){return T=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},T.apply(this,arguments)},fe=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r},l=[1,3,5],pe=[S("PropagateLoader","25% {transform: translateX(-".concat(l[0],`rem) scale(0.75)}
    50% {transform: translateX(-`).concat(l[1],`rem) scale(0.6)}
    75% {transform: translateX(-`).concat(l[2],`rem) scale(0.5)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-0"),S("PropagateLoader","25% {transform: translateX(-".concat(l[0],`rem) scale(0.75)}
    50% {transform: translateX(-`).concat(l[1],`rem) scale(0.6)}
    75% {transform: translateX(-`).concat(l[1],`rem) scale(0.6)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-1"),S("PropagateLoader","25% {transform: translateX(-".concat(l[0],`rem) scale(0.75)}
    75% {transform: translateX(-`).concat(l[0],`rem) scale(0.75)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-2"),S("PropagateLoader","25% {transform: translateX(".concat(l[0],`rem) scale(0.75)}
    75% {transform: translateX(`).concat(l[0],`rem) scale(0.75)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-3"),S("PropagateLoader","25% {transform: translateX(".concat(l[0],`rem) scale(0.75)}
    50% {transform: translateX(`).concat(l[1],`rem) scale(0.6)}
    75% {transform: translateX(`).concat(l[1],`rem) scale(0.6)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-4"),S("PropagateLoader","25% {transform: translateX(".concat(l[0],`rem) scale(0.75)}
    50% {transform: translateX(`).concat(l[1],`rem) scale(0.6)}
    75% {transform: translateX(`).concat(l[2],`rem) scale(0.5)}
    95% {transform: translateX(0rem) scale(1)}`),"propogate-5")];function be(e){var t=e.loading,r=t===void 0?!0:t,s=e.color,a=s===void 0?"#000000":s,u=e.speedMultiplier,n=u===void 0?1:u,g=e.cssOverride,c=g===void 0?{}:g,d=e.size,i=d===void 0?15:d,y=fe(e,["loading","color","speedMultiplier","cssOverride","size"]),o=$(i),R=o.value,O=o.unit,v=T({display:"inherit",position:"relative"},c),b=function(E){return{position:"absolute",fontSize:"".concat(R/3).concat(O),width:"".concat(R).concat(O),height:"".concat(R).concat(O),background:a,borderRadius:"50%",animation:"".concat(pe[E]," ").concat(1.5/n,"s infinite"),animationFillMode:"forwards"}};return r?h.createElement("span",T({style:v},y),h.createElement("span",{style:b(0)}),h.createElement("span",{style:b(1)}),h.createElement("span",{style:b(2)}),h.createElement("span",{style:b(3)}),h.createElement("span",{style:b(4)}),h.createElement("span",{style:b(5)})):null}export{be as P,ve as u};
